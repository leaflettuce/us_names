{
    "contents" : "Exploratory Analysis of names of babys from 1910 to 2014.\n\n```{r}\nlibrary(ggplot2)\nlibrary(grid)\nlibrary(gridExtra)\nlibrary(data.table)\nlibrary(reshape2)\n```\n\n\n```{r}\n#load data\nnames <- read.csv('StateNamesPerCapita.csv')\n\n#Inital Explore\nsummary(names)\nnames(names)\ndim(names)\nstr(names)\nlevels(names$Year)\nsummary(names$Year)\nsummary(names$Count)\n```\n\nBabies born per decade in the U.S.\n```{r}\n#creating subsets and buckets\n\n#decade split\nnames$year.bucket <- cut(names$Year, \n                      breaks = c(1910, 1920, 1930, \n                                 1940, 1950, 1960,\n                                 1970, 1980, 1990, \n                                 2000, 2010, 2014))\n\n#gender subsets\nmale <- subset(names, Gender == 'M')\nfemale <- subset(names, Gender == 'F')\n\n```\n\nHistogram\n```{r}\n  \n##Different names born per year\nggplot(aes(x = Year), data = names) +\n  geom_histogram(binwidth = 1) + \n  xlim(1910,2014)  +\n  ylim(0, 100000) +\n  ggtitle('Number of Different Names Born per Year') +\n  xlab('Year') + \n  ylab('Births')\n\n```\n\n\nBivariate Plots\n\n```{r}\n##subset births per year\nbib_names <- read.table(\"bib_names_list.txt\", sep=\"\\n\")\ncolnames(bib_names) <- c(\"name\")\n\nnames$biblical <- ifelse(names$Name %in% bib_names$name,1, 0)\n\n\nyear.subset <- aggregate(names$Count, by=list(names$Year, names$biblical), \"sum\")\n#clean names\ncolnames(year.subset) <- c(\"year\", 'biblical', \"count\")\n\nyear.subset$decade <- cut(year.subset$year, \n                      breaks = c(1909, 1920, 1930, \n                                 1940, 1950, 1960,\n                                 1970, 1980, 1990, \n     \n                                 2000, 2015))\n###add population manually\ny <- year.subset$year\np <- c(91800000,93863000,95335000,97225000,99111000,100546000,101961000,103268000,103208000,104514000,106461000,108538000,110049000,111947000,114109000,115829000,117397000,119035000,120509000,121767000,123207600,124039000,124840000,125578000,126373773,127250232,128053180,128824829,129824939,130879718,132122446,133402471,134859553,136739353,138397345,139928165,141388566,144126071,146631302,149188130,152271417, 154877889,157552740,160184192,163025854,165931202,168903031,171984130,174881904,177829628,180671158,183691481,186537737,189241789,191888791,194302963,196560338,198712056,200706052,202676946,205052174,207660677,209896021,211908788,213853928,215973199,218035164,220239425,222584545,225055487,227224681,229465714,231664458,233791994,235824902,237923795,240132887,242288918,244498982,246819230,249438712,252127402,254994517,257746103,260289237,262764948,265189794,267743595,270298524,272690813,282171957,285081556,287803914,290326418,293045739,295753151,298593212,301579895,304374846,307006550,310232863,311000000,312000000,312800000,313250000)\n\npopulation.subset  <- data.frame(y, p)\n\ncolnames(population.subset) <- c(\"year\", \"population\")\n\n#add per capita\nperCapita <- merge(year.subset, population.subset, by.x = \"year\", by.y = \"year\")\n\n\nperCapita$birthCapita <- perCapita$count/perCapita$population * 1000\n\n#####GENDER\n\n###   year gender subset\nGenderbyYear <- aggregate(names$Count, by=list(names$Year, names$Gender), \"sum\")\n\n#clean names\ncolnames(GenderbyYear) <- c(\"year\", \"gender\", 'count')\n\n#merge pop into it\nGenderbyYear <- merge(GenderbyYear, population.subset, by.x = \"year\", by.y = \"year\")\n\nGenderbyYear$capita <- GenderbyYear$count/GenderbyYear$population * 1000\n```\n\n```{r}\n\n\n#births per year\nggplot(aes(x = year, y = count), data = year.subset) +\n  geom_line(size = 1.5) + \n  xlim(1910,2014)  +\n  ylim(0, 4100000) +\n  ggtitle('Babies Born per Year') +\n  xlab('Year') + \n  ylab('Births')\n\n###births per decade\nggplot(aes(x = decade, y = count), data = year.subset) +\n  geom_bar(stat = 'summary',\n           fun.y = 'sum') +\n  ggtitle('Babies Born per Decade') +\n  xlab('Decade') + \n  ylab('Births') +\n  scale_x_discrete('Decade', labels = c(\"1910\",'1920', '1930', '1940', '1950', '1960', '1970', '1980', '1990', '2000', '2010'))\n\n##per 1000 people by year\nggplot(aes(x = year, y = birthCapita), data = perCapita) +\n  geom_line(size = 1.25) + \n  xlim(1915,2010)  +\n  ylim(0, 30) +\n  ggtitle('Babies Born in US per 1000 people by Year') +\n  xlab('Year') + \n  ylab('Births per 1000 people')+ \n  theme_minimal()\n\n##population over time\nggplot(aes(x = year, y = population), data = perCapita) +\n  geom_line(size = 1.25) + \n  xlim(1915,2010)  +\n  ylim(0, 350000000) +\n  ggtitle('US Population') +\n  xlab('Year') + \n  ylab('population')+ \n  theme_minimal()\n\nggplot(aes(x = gender, y = count, fill = gender), \n       data = GenderbyYear) +\n  geom_bar(stat = 'summary',\n           fun.y = 'sum') +\n  ggtitle('Total births by Gender') +\n  xlab('Gender') + \n  ylab('Births')\n\n```\n\n\nMultivariate \n\n```{r}\n\n\ng1 <- ggplot(aes(x = year, y = count, color = gender), \n       data = GenderbyYear) +\n  xlim(1910,2014)  +\n  geom_line(size = 1.25) +\n  ggtitle('Births') +\n  xlab('Year') + \n  ylab('Births') \n\ng2 <-ggplot(aes(x = year, y = capita, color = gender), \n       data = GenderbyYear) +\n  xlim(1910,2014)  +\n  geom_line(size = 1.25) +\n  ggtitle('Birthrate per 1000 people') +\n  xlab('Year') + \n  ylab('Births') \n\ngrid.arrange(g1, g2, ncol = 1, \n  main=textGrob(\"Gender Births over the Years\", \n                           gp=gpar(fontsize=30)))\n\n```\n\n\nSpecific Names Exploration\n```{r}\nBandNames <- names[ which( names$Name == \"Andrew\" | \n                             names$Name == \"Kyle\" |\n                             names$Name == \"Michael\" |\n                             names$Name == \"Daniel\" |\n                             names$Name == \"Jeremy\" |\n                             names$Name == \"Jonathan\"), ]\n\nBandNames <- aggregate(BandNames$Count, \n                          by=list(BandNames$Year, \n                                  BandNames$Name), \n                          \"sum\")\n\ncolnames(BandNames) <- c(\"year\", \"name\", \"count\")\n\nggplot(aes(x = year, y = count, color = name), \n       data = BandNames) +\n  xlim(1910,2014)  +\n  geom_line(size = 1.25) +\n  ggtitle('Sample Name changes over Years') +\n  xlab('Year') + \n  ylab('Birth per Year') \n\n```\n\nBiblical Names\n\n```{r}\n\nyear.subset.long <- subset(year.subset, select = c('decade',\n                                                        'biblical',\n                                                        'count'))\n\nyear.subset.long<-melt(year.subset,id.vars=c(\"decade\",'biblical', 'count'))\n                       \nyear.subset.long$biblical<-cut(year.subset.long$biblical, \n                               breaks = c(-0.5, 0, 1.5),\n                               labels = c(0,1))\n\nyear.subset.long.2 <- aggregate(year.subset.long$count, by=list(year.subset.long$decade, year.subset.long$biblical), \"sum\")\n\ncolnames(year.subset.long.2) <- c(\"decade\", 'biblical','count')\n\nyear.subset.long.2$total_count <- ave(year.subset.long.2$count, \n                                      year.subset.long.2$decade, \n                                      FUN=sum)\n\n\nb1 <- ggplot(aes(x = decade, y = count, \n           fill = biblical), data = year.subset.long.2) +\n  geom_bar(position = 'dodge',\n           stat = 'identity',\n           size = 0.25) +\n  ggtitle('Total Counts in Millions') +\n  xlab('Decade') + \n  ylab('Births') +\n  scale_fill_discrete(name=\"biblical\",\n                      breaks=c(0, 1),\n                      labels=c(\"Non\", \"Biblical\")) +\n  geom_text(aes(label=round(count/1000000, digits = 2)),\n            \n            position=position_dodge(width=0.9), \n            vjust=-0.25)+\n  scale_x_discrete('Decade', labels = c(\"1910\",'1920', '1930', '1940', '1950', '1960', '1970', '1980', '1990', '2000', '2010'))+\n  scale_y_continuous('Births', labels = c(\"0\",'10 million', '20 million', '30 million', '04 million'))\n\n\n\nb2 <-ggplot(aes(x = decade, y = count/total_count*100, \n           fill = biblical), data = year.subset.long.2) +\n  geom_bar(stat = 'identity',\n           position = 'identity',\n           size = 0.25) +\n  ggtitle('Percentages') +\n  xlab('Decade') + \n  ylab('Births') +\n  scale_fill_discrete(name=\"biblical\",\n                      breaks=c(0, 1),\n                      labels=c(\"Non\", \"Biblical\")) +\n  geom_text(aes(label=sprintf(\"%1.0f%%\", 100*count/total_count)),\n            \n            position=position_dodge(width=0.9), \n            vjust=-0.25)+\n  scale_x_discrete('Decade', labels = c(\"1910\",'1920', '1930', '1940', '1950', '1960', '1970', '1980', '1990', '2000', '2010'))+\n  scale_y_continuous('Percent', limits = c(0, 105)) +\n  coord_flip() \n                \n\ngrid.arrange(b1, b2, ncol = 1, \n  main=textGrob(\"Biblical vs Non Names per Decade\", \n                           gp=gpar(fontsize=30)))              \n\n```",
    "created" : 1454108399769.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1592439479",
    "id" : "F9ED47BA",
    "lastKnownWriteTime" : 1455631306,
    "path" : "E:/saves/kaggle/baby_names/exploring_names.rmd",
    "project_path" : "exploring_names.rmd",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "source_on_save" : false,
    "type" : "r_markdown"
}